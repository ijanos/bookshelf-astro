---
import { type Book } from "../types/book.ts";
import BookCoverSvg from "./BookCoverSvg.astro";
import { Image } from 'astro:assets';
import { covers } from '../data/covers.ts';

interface Props {
    book: Book;
}

const { book } = Astro.props;

const ids = book.id || {};
const cover = Object.entries(ids).find(([source, id]) => covers.has(`${source}__${id}__`.toLowerCase()));
---
{ cover ? <Image src={covers.get(`${cover[0]}__${cover[1]}__`.toLowerCase())!()} width="200" alt={book.title} /> : <BookCoverSvg book={book}/> }
